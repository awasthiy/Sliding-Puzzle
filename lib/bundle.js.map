{"version":3,"sources":["webpack/bootstrap b31d0d38d2eabfbf0906","./lib/main.js","./lib/view.js","./lib/game.js","./lib/board.js","./lib/move_error.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;;;;;;ACND;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAsB,6BAA6B;AACnD;AACA;;AAEA,yBAAwB,6BAA6B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;ACvHA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACnBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAgC,OAAO;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,mBAAmB;AACpC;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,sBAAsB;AACvC;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb,iBAAgB;AAChB;AACA,aAAY,kBAAkB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7IA;AACA;AACA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b31d0d38d2eabfbf0906\n **/","var View = require('./view');\nvar Board = require('./board');\n\n$(function () {\n  var canvasEl = $('.game-window');\n  new View(canvasEl);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/main.js\n ** module id = 0\n ** module chunks = 0\n **/","var Game = require('./game');\n\nvar View = function (ctx) {\n  this.ctx = ctx;\n  this.setupWindow();\n  this.newGame();\n};\n\nView.prototype.setupWindow = function () {\n  $('#level').on('input change', function (event) {\n    var gridSize = event.currentTarget.value;\n    $('#rangeText').text('Grid Size: ' + gridSize + ' x ' + gridSize);\n   });\n\n  $(\"#new-game\").submit(function (event) {\n    event.preventDefault();\n    this.newGame($('#level').val());\n  }.bind(this));\n};\n\nView.prototype.newGame = function (gridSize) {\n  this.ctx.removeClass('game-over');\n  var $gridPuzzle = $('.grid-puzzle');\n  $gridPuzzle.html('');\n  var $gridSolution = $('.grid-solution');\n  $gridSolution.html('');\n  var $figcaption = $('.message');\n  $figcaption.html('');\n  clearInterval(this.timeDisplay);\n  this.ctx.off(\"click\");\n  this.game = new Game(gridSize);\n  this.bindEvents();\n  this.time = new Date();\n  this.setupBoard();\n  this.timer();\n};\n\nView.prototype.bindEvents = function () {\n  this.ctx.on('click', 'li', (function (event) {\n    var $square = $(event.currentTarget);\n    this.makeMove($square);\n  }).bind(this));\n};\n\nView.prototype.makeMove = function ($square) {\n  var pos = $square.data(\"pos\");\n  var value = $square.html();\n  var $oldEmpty = $(\".empty\");\n\n  try {\n    this.game.playMove(pos);\n  } catch (e) {\n    // alert(\"Invalid move! Try again.\");\n    return;\n  }\n  var $moves = $(\".moves\");\n  $moves.html(parseInt($moves.html()) + 1);\n\n  $square.html('');\n  $square.addClass('empty');\n  $oldEmpty.html(value);\n  $oldEmpty.removeClass('empty');\n\n  if (this.game.isOver()) {\n    this.ctx.addClass('game-over');\n    clearInterval(this.timeDisplay);\n    this.ctx.off(\"click\");\n    var $figcaption = $(\".message\");\n    $figcaption.html(\"You Win\");\n  }\n};\n\nView.prototype.setupBoard = function () {\n  var $gridPuzzle = $('.grid-puzzle');\n  var $gridSolution = $('.grid-solution');\n  for (var rowIdx = 0; rowIdx < this.game.gridSize; rowIdx++) {\n    var $ul = $('<ul>');\n    var $sul = $('<ul>');\n\n    for (var colIdx = 0; colIdx < this.game.gridSize; colIdx++) {\n      var num = this.game.board.grid[rowIdx][colIdx];\n      var snum = this.game.board.solution[rowIdx * this.game.gridSize + colIdx];\n      var $li;\n      if (num === null) {\n        $li = $('<li></li>');\n        $li.addClass('empty');\n      } else {\n        $li = $('<li>' + num + '</li>');\n      }\n      $li.data('pos', [rowIdx, colIdx]);\n\n      var $sli;\n      if (snum === null) {\n        $sli = $('<li></li>');\n      } else {\n        $sli = $('<li>' + snum + '</li>');\n      }\n\n      $ul.append($li);\n      $sul.append($sli);\n    }\n\n    $gridPuzzle.append($ul);\n    $gridSolution.append($sul);\n  }\n\n  var $time = $(\".time\");\n  $time.html(0);\n  var $moves = $(\".moves\");\n  $moves.html(0);\n};\n\nView.prototype.timer = function () {\n  this.timeDisplay = setInterval(function () {\n    var $time = $(\".time\");\n    $time.html(Math.floor((new Date() - this.time) / 1000));\n  }.bind(this), 1000);\n};\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/view.js\n ** module id = 1\n ** module chunks = 0\n **/","var Board = require('./board');\n\nfunction Game (gridSize) {\n  this.gridSize = gridSize || 3;\n  this.board = new Board(this.gridSize);\n}\n\n// Game.prototype.isValidMove = function (tileIdx) {\n//\n// };\n\nGame.prototype.playMove = function (pos) {\n  this.board.move(pos);\n};\n\nGame.prototype.isOver = function () {\n  return this.board.isOver();\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 2\n ** module chunks = 0\n **/","var MoveError = require(\"./move_error\");\n\nfunction Board (gridSize) {\n  this.gridSize = gridSize;\n  this.solution = Board.tileContent(this.gridSize);\n  this.grid = this.makeGrid(Board.makeSolvable(this.solution));\n}\n\nfunction shuffleArray(array) {\n  var shuffled = array.slice(0);\n  for (var i = array.length - 1; i > 0; i--) {\n      var j = Math.floor(Math.random() * (i + 1));\n      var temp = shuffled[i];\n      shuffled[i] = shuffled[j];\n      shuffled[j] = temp;\n  }\n  return shuffled;\n}\n\nBoard.prototype.makeGrid = function (array) {\n  var grid = [];\n\n  for (var i = 0; i < this.gridSize; i++) {\n    grid.push([]);\n    for (var j = 0; j < this.gridSize; j++) {\n      grid[i].push(array[i * this.gridSize + j]);\n    }\n  }\n\n  return grid;\n};\n\nBoard.makeSolvable = function (array) {\n  var tileArray = shuffleArray(array);\n  if (Board.isSolvable(tileArray)) {\n    return tileArray;\n  } else {\n    return Board.makeSolvable(tileArray);\n  }\n};\n\nBoard.tileContent = function (gridSize) {\n  var tileRange = [];\n  for (var i = 1; i < Math.pow(gridSize, 2); i++) {\n    tileRange.push(i);\n  }\n  tileRange.push(null);\n  return tileRange;\n};\n\nBoard.isSolvable = function (tileArray) {\n  var parity = 0;\n  var row = 0;\n  var gridSize = Math.sqrt(tileArray.length);\n  var blankRow = 0;\n\n  for (var i = 0; i < tileArray.length; i++) {\n    if (i % gridSize === 0) {\n      row++;\n    }\n\n    if (tileArray[i] === null) {\n      blankRow = row;\n    }\n\n    for (var j = i + 1; j < tileArray.length; j++) {\n      if (tileArray[i] > tileArray[j] && tileArray[j] !== null) {\n        parity++;\n      }\n    }\n  }\n\n  if (gridSize % 2 === 0 && blankRow % 2 !== 0) {\n    return parity % 2 !== 0;\n  } else {\n    return parity % 2 === 0;\n  }\n};\n\nBoard.prototype.isOver = function () {\n  return this.solution.toString() === this.grid.flatten().toString();\n};\n\nArray.prototype.flatten = function () {\n  return this.reduce(function (a, b) {\n    return a.concat(b);\n  });\n};\n\nBoard.prototype.surroundingPositions = function (pos) {\n  var positions = [];\n  positions.push([pos[0] + 1, pos[1]]);\n  positions.push([pos[0] - 1, pos[1]]);\n  positions.push([pos[0], pos[1] + 1]);\n  positions.push([pos[0], pos[1] - 1]);\n  return  positions.filter(function (pos) {\n    return this.isValidPos(pos);\n  }.bind(this));\n};\n\nBoard.prototype.isValidPos = function (pos) {\n  return (\n    (0 <= pos[0]) && (pos[0] < this.gridSize) && (0 <= pos[1]) && (pos[1] < this.gridSize)\n  );\n};\n\nfunction indexOfArray(val, array) {\n  var\n    hash = {},\n    indexes = {},\n    i, j;\n  for(i = 0; i < array.length; i++) {\n    hash[array[i]] = i;\n  }\n  return (hash.hasOwnProperty(val)) ? hash[val] : -1;\n}\n\nBoard.prototype.isValidMove = function (pos, emptyPosition) {\n  var positionsSurroundingEmpty = this.surroundingPositions(emptyPosition);\n  return indexOfArray(pos, positionsSurroundingEmpty) !== -1;\n};\n\nBoard.prototype.emptyPosition = function () {\n  var flattenedGrid = this.grid.flatten();\n  var emptyPosition = flattenedGrid.indexOf(null);\n  emptyPosition = [\n    Math.floor(emptyPosition / this.gridSize),\n    emptyPosition % this.gridSize\n  ];\n  return emptyPosition;\n};\n\nBoard.prototype.move = function (pos) {\n  var emptyPosition = this.emptyPosition();\n  if (!this.isValidMove(pos, emptyPosition)) {\n    throw new MoveError(\"Is not valid position\");\n  }\n  this.grid[emptyPosition[0]][emptyPosition[1]] = this.grid[pos[0]][pos[1]];\n  this.grid[pos[0]][pos[1]] = null;\n};\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/board.js\n ** module id = 3\n ** module chunks = 0\n **/","function MoveError (msg) {\n  this.msg = msg;\n}\n\nmodule.exports = MoveError;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/move_error.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}